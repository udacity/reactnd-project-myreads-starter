//
// ────────────────────────────────────────────────────── I ──────────
//   :::::: I M P O R T S : :  :   :    :     :        :          :
// ────────────────────────────────────────────────────────────────
//
import { createActions, createReducer } from "reduxsauce";
// ────────────────────────────────────────────────────────────────────────────────
//
// ────────────────────────────────────────────────────────────────── II ──────────
//   :::::: I N I T I A L   S T A T E : :  :   :    :     :        :          :
// ────────────────────────────────────────────────────────────────────────────
//
const INITIAL_STATE = {
  query: "",
  result: []
};
// ────────────────────────────────────────────────────────────────────────────────
//
// ────────────────────────────────────────────────────────────────────────── III ──────────
//   :::::: R E D U C E R   F U N C T I O N S : :  :   :    :     :        :          :
// ────────────────────────────────────────────────────────────────────────────────────
//
const search = (state = INITIAL_STATE, { payload }) => {
  return {
    ...state,
    query: payload
  };
};

const receiveSearch = (state = INITIAL_STATE, { payload = [] }) => {
  return {
    ...state,
    result: payload.map(
      ({ title, authors, imageLinks: { thumbnail }, shelf, id }) => ({
        title,
        authors,
        thumbnail,
        shelf,
        id
      })
    )
  };
};

// ────────────────────────────────────────────────────────────────────────────────
//
// ────────────────────────────────────────────────────── IV ──────────
//   :::::: E X P O R T S : :  :   :    :     :        :          :
// ────────────────────────────────────────────────────────────────
//
//
// ─── TYPES AND CREATORS ─────────────────────────────────────────────────────────
//
export const { Types, Creators } = createActions({
  search: ["query"],
  receiveSearch: ["payload"]
});
// ────────────────────────────────────────────────────────────────────────────────
//
// ─── REDUCER ────────────────────────────────────────────────────────────────────
//
export default createReducer(INITIAL_STATE, {
  [Types.SEARCH]: search,
  [Types.RECEIVE_SEARCH]: receiveSearch
});
// ────────────────────────────────────────────────────────────────────────────────
