(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(30)},21:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(14),c=a.n(r),l=a(5),s=a(10),i="https://reactnd-books-api.udacity.com",u=localStorage.token;u||(u=localStorage.token=Math.random().toString(36).substr(-8));var m={Accept:"application/json",Authorization:u},h=function(){return fetch("".concat(i,"/books"),{headers:m}).then(function(e){return e.json()}).then(function(e){return e.books})},d=function(e,t){return fetch("".concat(i,"/books/").concat(e.id),{method:"PUT",headers:Object(s.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},f=function(e){return fetch("".concat(i,"/search"),{method:"POST",headers:Object(s.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},b=(a(21),a(4));var E=function(e){var t,a=e.books,n=e.updateShelf,r=e.currentShelf;return t=a.imageLinks?a.imageLinks.thumbnail:"",o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t,")")}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(e){return n(a,e.target.value)},value:r},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},a.title),o.a.createElement("div",{className:"book-authors"},a.authors)))};var k=function(e){var t=e.books,a=e.updateShelf,n=t.filter(function(e){return"currentlyReading"===e.shelf}),r=t.filter(function(e){return"wantToRead"===e.shelf}),c=t.filter(function(e){return"read"===e.shelf});return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(E,{books:e,updateShelf:a,currentShelf:e.shelf}))})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},r.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(E,{books:e,updateShelf:a,currentShelf:e.shelf}))})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},c.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(E,{books:e,updateShelf:a,currentShelf:e.shelf}))})))))),o.a.createElement("div",{className:"open-search"},o.a.createElement(b.b,{to:"/search"},o.a.createElement("button",null,"Search"))))},v=a(0);var p=function(e){var t=e.books,a=e.updateShelf,r=Object(n.useState)(""),c=Object(l.a)(r,2),s=c[0],i=c[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),h=m[0],d=m[1],k=Object(n.useState)(!0),v=Object(l.a)(k,2),p=v[0],N=v[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){0!==s.length?f(s).then(function(e){e.error?(d([]),N(!0)):(d(e),N(!1))}):N(!0)},100);return function(){clearTimeout(e)}},[s]),o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(b.b,{to:"/"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{placeholder:"Search by title",value:s,type:"text",onChange:function(e){i(e.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},h.map(function(e){var n="none";return t.forEach(function(t){t.id!==e.id?e.shelf="none":n=t.shelf}),!1===p?o.a.createElement("li",{key:e.id},o.a.createElement(E,{books:e,updateShelf:a,currentShelf:n})):o.a.createElement("li",{key:e.id})}))))};var N=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],u=s[1];Object(n.useEffect)(function(){h().then(function(e){r(e),u(!0)})},[a]);var m=function(e,t){d(e,t)};return i?o.a.createElement("div",{className:"app"},o.a.createElement(v.a,{path:"/",exact:!0,render:function(){return o.a.createElement(k,{books:a,updateShelf:m})}}),o.a.createElement(v.a,{path:"/search",render:function(){return o.a.createElement(p,{books:a,updateShelf:m})}})):o.a.createElement("div",null,o.a.createElement("h1",null,"Loading"))};a(28);c.a.render(o.a.createElement(b.a,null,o.a.createElement(N,null),","),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.cfa767b0.chunk.js.map